{% load socialaccount %}
<div class="content-wrapper bg-white">
    <div class="container login-section">
        <div class="row align-items-center justify-content-center">
            
            <!-- Image -->
            <div class="col-md-10 col-lg-6 col-xl-7 d-flex align-items-center order-1 order-lg-2">
            <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-registration/draw1.webp"
                class="img-fluid" alt="Login illustration">
            </div>

            <!-- Form -->
            
            <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">
                
                <form style="max-width: 600px; margin: auto;" method="post">
                    {% csrf_token %}
                    <h2 class="mb-4 text-center">Sign up</h2>

                    <div class="row">
                        <div class="col-md-6 mb-4">

                            <div data-mdb-input-init class="form-outline">
                                <input type="text" name="first_name" class="form-control" required>
                                <label class="form-label">Ism</label>
                            </div>

                        </div>
                        <div class="col-md-6 mb-4">

                            <div data-mdb-input-init class="form-outline">
                                <input type="text" name="last_name" class="form-control" required>
                                <label class="form-label">Familiya</label>
                            </div>

                        </div>
                    </div>

                    <div data-mdb-input-init class="form-outline mb-4">
                        <input type="email" name="email" class="form-control" required>
                        <label class="form-label">Email</label>
                    </div>

                    

                    <!-- RO‘L TANLOVI -->
                    <div class="row">
                        <!-- Foydalanuvchi nomi -->
                        <div class="col-md-6 mb-4">
                            <div data-mdb-input-init class="form-outline">
                                <input name="username" class="form-control" required>
                                <label class="form-label">Foydalanuvchi nomi</label>
                            </div>
                        </div>

                        <!-- Role tanlash -->
                        <div class="col-md-6 mb-4">
                            <select data-mdb-select-init name="role" id="role" class="form-select" required onchange="toggleFields()">
                                <option value="student">Talaba</option>
                                <option value="teacher">O'qituvchi</option>
                            </select>
                        </div>
                    </div>


                    <!-- Har doim bor bo‘lgan row -->
                    <div class="row">
                        <!-- Talaba uchun: Yo'nalish -->
                        <div class="col-md-6 mb-4 student-field" style="display: none;">
                            <div data-mdb-input-init class="form-outline">
                                <input type="text" name="discipline" class="form-control">
                                <label class="form-label">Yo'nalish</label>
                            </div>
                        </div>

                        <!-- Talaba uchun: Guruh -->
                        <div class="col-md-6 mb-4 student-field" style="display: none;">
                            <div data-mdb-input-init class="form-outline">
                                <input type="text" name="user_group" class="form-control">
                                <label class="form-label">Guruh</label>
                            </div>
                        </div>

                        <!-- O'qituvchi uchun: Kafedra -->
                        <div class="col-md-12 mb-4 teacher-field" style="display: none;">
                            <div data-mdb-input-init class="form-outline">
                                <input type="text" name="department" class="form-control">
                                <label class="form-label">Kafedra</label>
                            </div>
                        </div>
                    </div>



                    <div data-mdb-input-init class="form-outline mb-4">
                        <input type="password" name="password1" class="form-control" required>
                        <label class="form-label">Parol</label>
                    </div>

                    <div data-mdb-input-init class="form-outline mb-4">
                        <input type="password" name="password2" class="form-control" required>
                        <label class="form-label">Parolni qayta kiriting</label>
                    </div>
                    
                    <div class="d-grid mb-3">
                        <button type="submit" class="btn btn-primary btn-lg">Register</button>
                    </div>

                    <div data-mdb-input-init class="form-outline mb-4">
                        <a href="{% provider_login_url 'google' %}" class="field google">
                            <span>SignUp with Google</span>
                        </a>
                    </div>

                </form>


            </div>
        </div>
    </div>
</div>


<script>
    function toggleFields() {
        const role = document.getElementById("role").value;
        const studentFields = document.querySelectorAll(".student-field");
        const teacherFields = document.querySelectorAll(".teacher-field");

        if (role === "student") {
            studentFields.forEach(el => el.style.display = "block");
            teacherFields.forEach(el => el.style.display = "none");
        } else if (role === "teacher") {
            studentFields.forEach(el => el.style.display = "none");
            teacherFields.forEach(el => el.style.display = "block");
        } else {
            // Agar hech narsa tanlanmagan bo‘lsa, hammasini yashir
            studentFields.forEach(el => el.style.display = "none");
            teacherFields.forEach(el => el.style.display = "none");
        }
    }

    window.onload = toggleFields;
</script>
